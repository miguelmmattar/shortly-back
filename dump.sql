CREATE DATABASE shortly;

CREATE TABLE users (
	id SERIAL PRIMARY KEY,
	name VARCHAR(100) NOT NULL,
	email VARCHAR(100) NOT NULL UNIQUE,
	"passwordHash" VARCHAR(100) NOT NULL UNIQUE,
	"createdAt" TIMESTAMP DEFAULT Now() NOT NULL
);

CREATE TABLE sessions (
	id SERIAL PRIMARY KEY,
	"userId" INTEGER REFERENCES "users"("id"),
	name VARCHAR(100) NOT NULL,
	email VARCHAR(100) NOT NULL UNIQUE,
	token VARCHAR(100) NOT NULL UNIQUE,
	"createdAt" TIMESTAMP DEFAULT Now() NOT NULL
);

CREATE TABLE urls (
	id SERIAL PRIMARY KEY,
	"shortUrl" VARCHAR(6) NOT NULL,
	url TEXT NOT NULL,
	"visitCount" INTEGER DEFAULT 0 NOT NULL,
	"userId" INTEGER REFERENCES "users"("id"),
	"createdAt" TIMESTAMP DEFAULT Now() NOT NULL
);

